var S=Object.defineProperty;var v=(s,e,i)=>e in s?S(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var p=(s,e,i)=>v(s,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();class k{info(e){console.log(`[${new Date().toISOString()}][INFO] ${e}`)}error(e){console.log(`[${new Date().toISOString()}][ERROR] ${e}`)}warn(e){console.log(`[${new Date().toISOString()}][WARN] ${e}`)}}const l=new k;class w{constructor(e){p(this,"supplies");p(this,"tableElement");p(this,"initialSupplies");p(this,"currentSort",null);this.initialSupplies=JSON.parse(JSON.stringify(e)),this.supplies=JSON.parse(JSON.stringify(e)),this.createTable()}createTable(){this.tableElement=document.createElement("table"),this.tableElement.className="w-full border-collapse border border-gray-300",this.render()}reset(){this.supplies=JSON.parse(JSON.stringify(this.initialSupplies)),this.currentSort=null,this.createTable(),l.info("Table reset to initial state")}render(){this.tableElement.innerHTML=`
      <thead>
        <tr>
          <th class="p-2 border border-gray-300"><input type="checkbox" id="selectAll"></th>
          ${Object.keys(this.supplies[0]).filter(e=>e!=="selected"&&e!=="id").map(e=>`<th class="p-2 border border-gray-300 cursor-pointer" data-sort="${e}">
              ${e.charAt(0).toUpperCase()+e.slice(1)}
              ${this.getSortIndicator(e)}
            </th>`).join("")}
        </tr>
      </thead>
      <tbody>
        ${this.supplies.map(e=>`
          <tr class="${e.selected?"bg-blue-100":""}">
            <td class="p-2 border border-gray-300"><input type="checkbox" ${e.selected?"checked":""} data-id="${e.id}"></td>
            ${Object.entries(e).filter(([i])=>i!=="selected"&&i!=="id").map(([i,t])=>`<td class="p-2 border border-gray-300" data-id="${e.id}" data-key="${i}">${t}</td>`).join("")}
          </tr>
        `).join("")}
      </tbody>
    `,this.addEventListeners()}getSortIndicator(e){return this.currentSort&&this.currentSort.column===e?this.currentSort.direction==="asc"?"‚ñ≤":"‚ñº":""}addEventListeners(){const e=this.tableElement.querySelectorAll("th[data-sort]");for(const n of e)n.addEventListener("click",()=>this.sortTable(n.getAttribute("data-sort")));const i=this.tableElement.querySelectorAll("td[data-id][data-key]");for(const n of i)n.addEventListener("dblclick",()=>this.makeEditable(n));const t=this.tableElement.querySelector("#selectAll");t==null||t.addEventListener("change",n=>{const o=n.target.checked;for(const d of this.supplies)d.selected=o;this.render()});const r=this.tableElement.querySelectorAll('input[type="checkbox"][data-id]');for(const n of r)n.addEventListener("change",o=>{const d=Number.parseInt(o.target.getAttribute("data-id")||""),c=this.supplies.find(u=>u.id===d);c&&(c.selected=o.target.checked,this.render())})}sortTable(e){this.currentSort&&this.currentSort.column===e?this.currentSort.direction=this.currentSort.direction==="asc"?"desc":"asc":this.currentSort={column:e,direction:"asc"},this.supplies.sort((i,t)=>i[e]&&t[e]&&i[e]<t[e]?this.currentSort&&this.currentSort.direction==="asc"?-1:1:i[e]&&t[e]&&i[e]>t[e]?this.currentSort&&this.currentSort.direction==="asc"?1:-1:0),this.render(),l.info(`Table sorted by ${e} in ${this.currentSort.direction}ending order`)}makeEditable(e){const i=e.textContent,t=document.createElement("input");t.value=i||"",t.className="w-full p-1",e.textContent="",e.appendChild(t),t.focus();const r=()=>{const n=t.value,o=Number.parseInt(e.getAttribute("data-id")||""),d=e.getAttribute("data-key");try{const c=this.parseAndValidateValue(d,n),u=this.supplies.findIndex(h=>h.id===o);u!==-1&&(this.supplies[u][d]=c,e.textContent=String(c),l.info(`Updated ${d} for chemical ${this.supplies[u].chemicalName} to ${c}`))}catch(c){alert(c.message),e.textContent=i}};t.addEventListener("blur",r),t.addEventListener("keypress",n=>{n.key==="Enter"&&(r(),t.blur())})}parseAndValidateValue(e,i){switch(e){case"id":{const t=Number.parseInt(i);if(Number.isNaN(t)||t<=0)throw new Error("ID must be a positive integer.");return t}case"density":case"viscosity":case"packSize":case"quantity":{const t=Number.parseFloat(i);if(Number.isNaN(t)||t<0)throw new Error(`${e} must be a non-negative number.`);return t}case"chemicalName":case"vendor":case"packaging":case"unit":{if(i.trim()==="")throw new Error(`${e} cannot be empty.`);return i}default:return i}}addSupply(e){try{for(const[i,t]of Object.entries(e))this.parseAndValidateValue(i,String(t));this.supplies.push(e),this.render(),l.info(`Added new supply: ${e.chemicalName}`)}catch(i){alert(`Failed to add new supply: ${i.message}`)}}deleteSelectedSupplies(){this.supplies=this.supplies.filter(e=>!e.selected),this.render(),l.info("Deleted selected supplies")}moveSelectedSupplies(e){const i=this.supplies.reduce((t,r,n)=>(r.selected&&t.push(n),t),[]);if(e==="up")for(let t=0;t<i.length;t++)i[t]>0&&!this.supplies[i[t]-1].selected&&([this.supplies[i[t]],this.supplies[i[t]-1]]=[this.supplies[i[t]-1],this.supplies[i[t]]]);else for(let t=i.length-1;t>=0;t--)i[t]<this.supplies.length-1&&!this.supplies[i[t]+1].selected&&([this.supplies[i[t]],this.supplies[i[t]+1]]=[this.supplies[i[t]+1],this.supplies[i[t]]]);this.render(),l.info(`Moved selected supplies ${e}`)}getElement(){return this.tableElement}getSupplies(){return this.supplies}}const E=[{id:1,chemicalName:"Ammonium Persulfate",vendor:"LG Chem",density:3525.92,viscosity:60.63,packaging:"Bag",packSize:100,unit:"kg",quantity:6495.18},{id:2,chemicalName:"Caustic Potash",vendor:"Formosa",density:3172.15,viscosity:48.22,packaging:"Bag",packSize:100,unit:"kg",quantity:8751.9},{id:3,chemicalName:"Dimethylaminopropylamino",vendor:"LG Chem",density:8435.37,viscosity:12.62,packaging:"Barrel",packSize:75,unit:"L",quantity:5964.61},{id:4,chemicalName:"Mono Ammonium Phosphate",vendor:"Sinopec",density:1597.65,viscosity:76.51,packaging:"Bag",packSize:105,unit:"kg",quantity:8183.73},{id:5,chemicalName:"Ferric Nitrate",vendor:"DowDuPont",density:364.04,viscosity:14.9,packaging:"Bag",packSize:105,unit:"kg",quantity:4154.33},{id:6,chemicalName:"n-Pentane",vendor:"Sinopec",density:4535.26,viscosity:66.76,packaging:"Barrel",packSize:200,unit:"L",quantity:6272.34},{id:7,chemicalName:"Glycol Ether PM",vendor:"LG Chem",density:6495.18,viscosity:72.12,packaging:"Bag",packSize:250,unit:"kg",quantity:8749.54},{id:8,chemicalName:"Sodium Hydroxide",vendor:"BASF",density:2130,viscosity:55.3,packaging:"Drum",packSize:50,unit:"kg",quantity:3e3},{id:9,chemicalName:"Hydrochloric Acid",vendor:"Evonik",density:1190,viscosity:1.9,packaging:"Tank",packSize:1e3,unit:"L",quantity:5500},{id:10,chemicalName:"Ethylene Glycol",vendor:"Shell",density:1113,viscosity:16.1,packaging:"IBC",packSize:1e3,unit:"L",quantity:4200},{id:11,chemicalName:"Acetone",vendor:"ExxonMobil",density:784,viscosity:.32,packaging:"Drum",packSize:200,unit:"L",quantity:2800},{id:12,chemicalName:"Methanol",vendor:"Methanex",density:792,viscosity:.59,packaging:"Tank",packSize:5e3,unit:"L",quantity:15e3},{id:13,chemicalName:"Sulfuric Acid",vendor:"Chemours",density:1840,viscosity:26.7,packaging:"Tank",packSize:2e3,unit:"L",quantity:1e4},{id:14,chemicalName:"Toluene",vendor:"Total",density:867,viscosity:.59,packaging:"Drum",packSize:200,unit:"L",quantity:3600},{id:15,chemicalName:"Isopropyl Alcohol",vendor:"Dow",density:786,viscosity:2.04,packaging:"IBC",packSize:1e3,unit:"L",quantity:5800}];document.addEventListener("DOMContentLoaded",()=>{var d,c,u,h,g,y;const s=document.querySelector("#app");if(s===null)throw new Error("App container not found");const e=new w(E),i=document.createElement("div");i.className="flex space-x-2 mb-4",i.innerHTML=`
    <button id="addRow" class="bg-blue-500 text-white p-2 rounded">+</button>
    <button id="moveDown" class="bg-gray-500 text-white p-2 rounded">‚Üì</button>
    <button id="moveUp" class="bg-gray-500 text-white p-2 rounded">‚Üë</button>
    <button id="deleteRow" class="bg-red-500 text-white p-2 rounded">üóëÔ∏è</button>
    <button id="refresh" class="bg-green-500 text-white p-2 rounded">‚Üª</button>
    <button id="save" class="bg-yellow-500 text-white p-2 rounded">üíæ</button>
  `,s.appendChild(i);const t=document.createElement("div");s.appendChild(t);function r(){t.innerHTML="",t.appendChild(e.getElement())}r(),(d=document.getElementById("addRow"))==null||d.addEventListener("click",()=>{const a={id:Math.max(...e.getSupplies().map(m=>m.id))+1,chemicalName:"New Chemical",vendor:"New Vendor",density:0,viscosity:0,packaging:"N/A",packSize:0,unit:"N/A",quantity:0};e.addSupply(a),r()}),(c=document.getElementById("deleteRow"))==null||c.addEventListener("click",()=>{e.deleteSelectedSupplies(),r()}),(u=document.getElementById("moveUp"))==null||u.addEventListener("click",()=>{e.moveSelectedSupplies("up"),r()}),(h=document.getElementById("moveDown"))==null||h.addEventListener("click",()=>{e.moveSelectedSupplies("down"),r()}),(g=document.getElementById("refresh"))==null||g.addEventListener("click",()=>{e.reset(),r(),l.info("Table refreshed")}),(y=document.getElementById("save"))==null||y.addEventListener("click",()=>{try{const a=e.getSupplies();for(const m of a)for(const[f,b]of Object.entries(m))e.parseAndValidateValue(f,String(b));console.log("Updated supplies:",a),l.info("Data saved (simulated)"),alert("Data saved successfully!")}catch(a){alert(`Failed to save data: ${a.message}`)}}),l.info("Application initialized");function n(){if(s===null)throw new Error("App is still not defined");const a=document.createElement("div");a.textContent="You are currently offline. Some features may be limited.",a.className="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4",s.insertBefore(a,s.firstChild)}function o(){const a=document.querySelector(".bg-yellow-100");a&&a.remove()}window.addEventListener("online",()=>{o(),l.info("Application is back online")}),window.addEventListener("offline",()=>{n(),l.info("Application is offline")}),navigator.onLine||n()});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(s=>{console.log("Service Worker registered successfully:",s)}).catch(s=>{console.log("Service Worker registration failed:",s)})});
